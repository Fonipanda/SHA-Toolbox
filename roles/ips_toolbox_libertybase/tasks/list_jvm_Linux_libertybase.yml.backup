---

- name: "listing application servers"
  shell: find /applis/*/wlb/ -name sa-* -print 2>/dev/null | grep -v temp | grep -v servers | grep -v pid | awk -F"/" '{print $5 }'
  register: list_lib_result
  changed_when: false
  failed_when: "list_lib_result.rc != 0"

- name: set results output
  include_role:
    name: ips_toolbox_set_results
  vars:
     set_results_component: "{{ libertybase_component }}"
     set_results_operation: "{{ libertybase_operation }}"
     set_results_role_name: "{{ libertybase_role_name }}"
     set_results_result_name: "{{ libertybase_result_name }}"
     set_results_item: "{{ libertybase_item }}"
     set_results_state: "info"
     set_results_status: "OK"
     set_results_value: "\

          {% if 'sa-' in list_lib_result.stdout %}\

            {{ list_lib_result.stdout_lines }}\

          {% else %}\

            application server not found\

          {% endif %}"

