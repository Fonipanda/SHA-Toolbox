---

- name: check uptime in day
  shell: uptime | awk -F ',' '{print $1}' | awk ' {if ($4 == "day") print $3;else if ($4 == "days") print $3;else print 0}' 
  failed_when: false
  changed_when: false
  register: uptime_days

- name: set result output
  include_role:
    name: ips_toolbox_set_results
  vars:
    set_results_state:
      "{% if (uptime_days.stdout | int) < (system_uptime_limit | int ) %}\

         Compliant\

      {% else %}\

         Not compliant\

      {% endif %}"
    set_results_item: "{{ inventory_hostname }}" 
    set_results_value: "{% if uptime_days.stdout < 1 %}\

                         0 day\

                        {% else %}\

                         {{ uptime_days.stdout }} days\

                        {% endif %}"
    set_results_component: "{{ system_component }}"
    set_results_operation: "{{ system_operation }}"
    set_results_role_name: "{{ system_role_name }}"
    set_results_result_name: "{{ system_result_name }}"
    set_results_status: "OK"

